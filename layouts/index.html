{{ define "main" }}
<nav class="hide-sm-flex top-left">
    <p><b>Blog Editions</b></p>
    {{ $posts := where .Site.Pages "Type" "post" }}
    {{ $years := $posts.GroupByDate "2006" }}
    {{ $.Scratch.Set "mostRecentYear" 0 }}
    {{ range $index, $element := $years }}
        {{ if eq $index 0 }}
            {{ $.Scratch.Set "mostRecentYear" $element.Key }}
        {{ end }}
        <a href="archive#{{ $element.Key }}">{{ $element.Key }}</a>
    {{ end }}
</nav>
<section class="h-feed">
    {{ range where .Site.Pages "Type" "post" }}
        {{ if eq (.Date.Format "2006") ($.Scratch.Get "mostRecentYear") }}
        <article class="h-entry">
            <h1 class="p-name"><a class="u-url" href="{{ .Permalink }}">{{ if .Title }}{{ .Title }}{{ else }}{{ .Date.Format "2 Jan 06" }}{{ end }}</a></h1>
            <time class="dt-published" datetime="{{ .Date.Format "2006-01-02T15:04:05-0700" }}">
                {{ .Date.Format "02 Jan 2006" }}
            </time>
            {{ .Content }}
        </article>
        {{ end }}
    {{ end }}
</section>
{{ end }}